(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6106],{20513:function(e){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetReplies"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"replies"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getRepliesByReplyIds"},arguments:[{kind:"Argument",name:{kind:"Name",value:"replies"},value:{kind:"Variable",name:{kind:"Name",value:"replies"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilepic"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isDeleted"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDiscussions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getDiscussionTopics"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilepic"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isDeleted"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReply"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"courseSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentCommentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isDeleted"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReplyToComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"courseSlug"},value:{kind:"Variable",name:{kind:"Name",value:"courseSlug"}}},{kind:"Argument",name:{kind:"Name",value:"parentCommentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentCommentId"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"isDeleted"},value:{kind:"Variable",name:{kind:"Name",value:"isDeleted"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDeleted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"context"},value:{kind:"Variable",name:{kind:"Name",value:"context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"commentId"},value:{kind:"Variable",name:{kind:"Name",value:"commentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"replies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"username"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilepic"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isDeleted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1104}};t.loc.source={body:"query GetReplies($replies: [String!]) {\n\tgetRepliesByReplyIds(replies: $replies) {\n\t\t_id\n\t\tslug\n\t\tcontent\n\t\treplies\n\t\tauthor {\n\t\t\t_id\n\t\t\tname\n\t\t\tusername\n\t\t\tprofilepic\n\t\t}\n\t\tisDeleted\n\t}\n}\n\nquery GetDiscussions($slug: String!) {\n\tgetDiscussionTopics(slug: $slug) {\n\t\t_id\n\t\tslug\n\t\tcontent\n\t\treplies\n\t\tauthor {\n\t\t\t_id\n\t\t\tname\n\t\t\tusername\n\t\t\tprofilepic\n\t\t}\n\t\tisDeleted\n\t}\n}\n\nmutation AddReply(\n\t$courseSlug: String!\n\t$parentCommentId: String!\n\t$content: String!\n\t$isDeleted: Boolean!\n) {\n\taddReplyToComment(\n\t\tcourseSlug: $courseSlug\n\t\tparentCommentId: $parentCommentId\n\t\tcontent: $content\n\t\tisDeleted: $isDeleted\n\t) {\n\t\tstatus\n\t\tdata {\n\t\t\t_id\n\t\t\tslug\n\t\t\tcontent\n\t\t\treplies\n\t\t\tisDeleted\n\t\t}\n\t\terror\n\t}\n}\n\nmutation CreateComment($slug: String!, $content: String!, $context: String!) {\n\tcreateComment(slug: $slug, content: $content, context: $context) {\n\t\tstatus\n\t\tdata\n\t\terror\n\t}\n}\n\nmutation DeleteComment($commentId: String!) {\n\tdeleteComment(commentId: $commentId) {\n\t\tstatus\n\t\tdata {\n\t\t\t_id\n\t\t\tcontent\n\t\t\treplies\n\t\t\tslug\n\t\t\tauthor {\n\t\t\t\tname\n\t\t\t\tusername\n\t\t\t\tprofilepic\n\t\t\t}\n\t\t\tisDeleted\n\t\t}\n\t\terror\n\t}\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,l=new Set,d=new Set;for(r.forEach((function(e){d.add(e)}));d.size>0;){var s=d;d=new Set,s.forEach((function(e){l.has(e)||(l.add(e),(i[e]||new Set).forEach((function(e){d.add(e)})))}))}return l.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),i[e.name.value]=t}})),e.exports=t,e.exports.GetReplies=r(t,"GetReplies"),e.exports.GetDiscussions=r(t,"GetDiscussions"),e.exports.AddReply=r(t,"AddReply"),e.exports.CreateComment=r(t,"CreateComment"),e.exports.DeleteComment=r(t,"DeleteComment")},36106:function(e,t,n){"use strict";n.d(t,{Z:function(){return z}});var i=n(809),a=n.n(i),r=n(85893),l=n(30266),d=n(67294),s=n(49821),o=n(70208),u=n(16687),m=n(20993),c=n(92809),p=n(76099),v=n(37499),k=n(17812),g=n(84170),f=n(66083),h=n(29525),N=n(7212),x=n(66856),y=n(282),b=n(51115),S=n(25281),D=n(69866),C=n(85639),j=n(78513),w=n(28428),F=n(20513),R=n(78792),T=n(27484),V=n.n(T),_=n(84110),A=n.n(_),O=n(38456),Z=n.n(O),I=n(41664),$=n(82078);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}V().extend(A());var G=function(e){var t,n,i,o,c,T,_,A,O=e.comment,E=e.isReply,G=e.dotslug,q=e.showReplies,B=e.setShowReplies,z=e.setReplies,H=e.replies,L=e.parentCommentId,M=e.refetchComments,Q="dark"===e.theme,J=(0,s.E8)()[0],U=(0,R.Tao)({skip:!J}).data,Y=(0,d.useState)(""),K=Y[0],W=Y[1];function X(){return(X=(0,l.Z)(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.Z.query({query:F.GetReplies,variables:{replies:t}});case 3:n=e.sent,(i=n.data).getRepliesByReplyIds&&z(i.getRepliesByReplyIds),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,u.A)("Are you connected to internet?"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var ee=(0,d.useState)(null),te=ee[0],ne=ee[1],ie=Boolean(te),ae=(0,d.useState)(!1),re=ae[0],le=ae[1],de=(0,d.useState)(!1),se=de[0],oe=de[1];function ue(){return(ue=(0,l.Z)(a().mark((function e(t){var n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=3;break}return(0,u.a1)("Create a free account to start conversation"),e.abrupt("return",null);case 3:return e.prev=3,e.next=6,p.Z.mutate({mutation:F.DeleteComment,variables:{commentId:t}});case 6:n=e.sent,"ok"===(i=n.data).deleteComment.status?((0,u.GO)("Comment deleted"),M(),r=null===H||void 0===H?void 0:H.map((function(e){return e._id===t?P(P({},e),{},{isDeleted:!0}):e})),z(r)):(0,u.A)(i.deleteComment.error||"Something went wrong"),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",(0,u.A)("Something went wrong. Are you connected to internet?"));case 14:return e.prev=14,ve(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})))).apply(this,arguments)}function me(){return(me=(0,l.Z)(a().mark((function e(){var t,n,i,r,l,d,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=3;break}return(0,u.a1)("Create a free account to start conversation"),e.abrupt("return",null);case 3:if(e.prev=3,oe(!0),K&&K.trim()){e.next=7;break}return e.abrupt("return",alert("Enter a reply"));case 7:return e.next=9,p.Z.mutate({mutation:F.AddReply,variables:{courseSlug:G,parentCommentId:L,content:K.trim(),isDeleted:!1}});case 9:t=e.sent,"ok"===(n=t.data).addReplyToComment.status?((0,u.GO)("Reply added"),M(),le(!1),B(!0),s=H||[],z([].concat((0,m.Z)(s),[{content:null===(i=n.addReplyToComment.data)||void 0===i?void 0:i.content,replies:null===(r=n.addReplyToComment.data)||void 0===r?void 0:r.replies,slug:null===(l=n.addReplyToComment.data)||void 0===l?void 0:l.slug,author:{_id:U.profileData._id,name:U.profileData.name,profilepic:U.profileData.profilepic,username:U.profileData.username},_id:null===(d=n.addReplyToComment.data)||void 0===d?void 0:d._id,isDeleted:!1}]))):(0,u.A)(n.addReplyToComment.error||"Something went wrong"),e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",(0,u.A)("Something went wrong. Are you connected to internet?"));case 17:return e.prev=17,W(""),oe(!1),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[3,14,17,21]])})))).apply(this,arguments)}var ce=(0,d.useState)(!1),pe=ce[0],ve=ce[1];return(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)(I.default,{href:"/user/".concat(null===(t=O.author)||void 0===t?void 0:t.username),children:(0,r.jsx)(v.Z,{src:(null===(n=O.author)||void 0===n?void 0:n.profilepic)||"/assets/images/avatar.jpg",width:E?25:40,height:E?25:40,className:"rounded-full"})})}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1 text-sm w-full",children:[(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(I.default,{href:"/user/".concat(null===(i=O.author)||void 0===i?void 0:i.username),children:(0,r.jsx)("a",{className:"font-bold block",children:(null===(o=O.author)||void 0===o?void 0:o.name)||"[Account Deleted]"})}),(0,r.jsx)("p",{className:"text-gray-500",children:V()((0,s.HC)(O._id)).fromNow()})]}),O.isDeleted?(0,r.jsxs)("p",{className:"italic",children:["This ",E?"reply":"comment"," was deleted"]}):(0,r.jsx)(Z(),{components:$.hH,children:O.content||""}),(0,r.jsxs)("div",{className:"flex space-x-8 text-xs",children:[(0,r.jsx)("button",{className:"text-gray-500",onClick:function(){return le((function(e){return!e}))},children:"REPLY"}),!E&&0!==(null===(c=O.replies)||void 0===c?void 0:c.length)&&(0,r.jsx)("button",{className:"text-gray-500",onClick:function(){var e;null!==(e=O.replies)&&void 0!==e&&e.length&&(B((function(e){return!e})),function(e){X.apply(this,arguments)}(O.replies))},children:q?(0,r.jsxs)(r.Fragment,{children:["Hide replies ",(0,r.jsx)(S.Z,{fontSize:"small"})]}):(0,r.jsxs)(r.Fragment,{children:["View"," ",1===(null===(T=O.replies)||void 0===T?void 0:T.length)?"1 reply":"".concat(null===(_=O.replies)||void 0===_?void 0:_.length," replies")," ",(0,r.jsx)(b.Z,{fontSize:"small"})]})}),(null===U||void 0===U?void 0:U.profileData._id)===(null===(A=O.author)||void 0===A?void 0:A._id)&&!O.isDeleted&&(0,r.jsxs)("div",{children:[(0,r.jsx)(k.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){ne(e.currentTarget)},style:{padding:0},children:(0,r.jsx)(j.Z,{fontSize:"small",className:"text-gray-500"})}),(0,r.jsx)(D.Z,{id:"long-menu",anchorEl:te,keepMounted:!0,open:ie,onClose:function(){ne(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:(0,r.jsxs)(C.Z,{onClick:function(){return ve(!0)},children:[(0,r.jsx)(w.Z,{})," Delete"]})})]})]}),re&&(0,r.jsxs)("div",{children:[(0,r.jsx)("textarea",{value:K,onChange:function(e){return W(e.target.value)},placeholder:"Add a public reply...",className:"w-full focus:outline-none focus:ring-0 rounded ".concat(Q?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"," py-2 px-4 mt-2")}),(0,r.jsxs)("div",{className:"flex mt-4 space-x-2",children:[(0,r.jsx)("button",{onClick:function(){return le(!1)},children:"Cancel"}),(0,r.jsx)("button",{onClick:function(){return me.apply(this,arguments)},disabled:se||!K.trim(),className:"rounded py-2 px-4 font-semibold text-white bg-gray-800 disabled:opacity-50",children:"Reply"})]})]})]}),(0,r.jsxs)(g.Z,{open:pe,onClose:function(){return ve(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(f.Z,{id:"alert-dialog-title",children:"Delete comment"}),(0,r.jsx)(h.Z,{children:(0,r.jsx)(N.Z,{id:"alert-dialog-description",children:"Delete your comment permanently?"})}),(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(y.Z,{onClick:function(){return ve(!1)},autoFocus:!0,children:"Cancel"}),(0,r.jsx)(y.Z,{onClick:function(){return function(e){return ue.apply(this,arguments)}(O._id)},color:"primary",variant:"contained",children:"Delete"})]})]})]})},q=function(e){var t=e.comment,n=e.refetchComments,i=(0,d.useState)(!1),a=i[0],l=i[1],s=(0,d.useState)(null),o=s[0],u=s[1];return(0,r.jsxs)("div",{className:"flex flex-col px-8 py-4 m-2",children:[(0,r.jsx)(G,{parentCommentId:t._id,comment:t,isReply:!1,showReplies:a,setShowReplies:l,setReplies:u,theme:e.theme,replies:o,refetchComments:n,dotslug:e.dotslug}),a&&(null===o||void 0===o?void 0:o.map((function(i){return(0,r.jsx)("div",{className:"ml-12 mt-4",children:(0,r.jsx)(G,{theme:e.theme,parentCommentId:t._id,comment:i,isReply:!0,showReplies:a,setShowReplies:l,setReplies:u,replies:o,refetchComments:n,dotslug:e.dotslug})},i._id)})))]},t._id)},B=n(46829),z=function(e){var t=(0,s.E8)()[0],n="dark"===e.theme,i=(0,d.useState)(null),m=i[0],c=i[1],p=(0,d.useState)(!1),k=p[0],g=p[1],f=(0,d.useState)(""),h=f[0],N=f[1],x=(0,R.Tao)({skip:!t}).data,y=(0,R.QJ)({skip:!e.dotslug,variables:{slug:e.dotslug},onCompleted:function(e){c(e.getDiscussionTopics)},notifyOnNetworkStatusChange:!0}).refetch,b=(0,B.useApolloClient)();function S(){return(S=(0,l.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=4;break}return(0,$.ho)({dismissable:!0}),(0,u.a1)("Create a free account to start conversation"),n.abrupt("return",null);case 4:if(h){n.next=6;break}return n.abrupt("return",alert("Please enter a comment"));case 6:return n.prev=6,g(!0),n.next=10,b.mutate({mutation:F.CreateComment,variables:{slug:e.dotslug,content:h,context:e.context}});case 10:n.next=15;break;case 12:return n.prev=12,n.t0=n.catch(6),n.abrupt("return",(0,u.A)("Are you connected to internet?"));case 15:return n.prev=15,g(!1),N(""),y(),n.finish(15);case 20:case"end":return n.stop()}}),n,null,[[6,12,15,20]])})))).apply(this,arguments)}return(0,r.jsx)("div",{className:"".concat(n?"text-white":"text-gray-900"," flex flex-col flex-grow relative"),children:(0,r.jsx)("div",{className:"flex flex-grow flex-col h-full relative",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mx-4 mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-4 px-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0 flex-grow-0",children:(0,r.jsx)(v.Z,{src:(null===x||void 0===x?void 0:x.profileData.profilepic)||"/assets/images/avatar.png",width:48,height:48,className:"rounded-full"})}),(0,r.jsxs)("div",{id:"commentbox-area-discussions",className:"grid overflow-x-auto flex-shrink-0 flex-grow","data-replicated-value":h,children:[(0,r.jsx)("textarea",{value:h,onChange:function(e){N(e.target.value)},placeholder:null!==x&&void 0!==x&&x.profileData?"Commenting as ".concat(x.profileData.name):"Add a public comment...",rows:1,className:"w-full  resize-none overflow-hidden bg-transparent rounded-none border-l-0 border-r-0 border-t-0 border-b ".concat(n?"text-white border-gray-400":"text-gray-900 after:text-gray-900 border-black"," focus:ring-0 py-2 pr-4 pl-0")}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n\t\t\t\t\t\t\t\t\t\t#commentbox-area-discussions::after,\n\t\t\t\t\t\t\t\t\t\t#commentbox-area-discussions textarea {\n\t\t\t\t\t\t\t\t\t\t\tgrid-area: 1 / 1 / 2 / 2;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#commentbox-area-discussions::after {\n\t\t\t\t\t\t\t\t\t\t\tcontent: attr(data-replicated-value) ' ';\n\t\t\t\t\t\t\t\t\t\t\twhite-space: pre-wrap;\n\t\t\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t\t\t\t\t\t\tborder: 1px solid gray;\n\t\t\t\t\t\t\t\t\t\t\tborder-left: 0;\n\t\t\t\t\t\t\t\t\t\t\tborder-right: 0;\n\t\t\t\t\t\t\t\t\t\t\tborder-top: 0;\n\t\t\t\t\t\t\t\t\t\t\tpadding: 0.5rem 0;\n\t\t\t\t\t\t\t\t\t\t\tpadding-right: 1rem;\n\t\t\t\t\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t"}})]})]}),(0,r.jsx)("div",{className:"flex flex-row-reverse mt-4 px-6",children:(0,r.jsx)("button",{onClick:function(){return S.apply(this,arguments)},disabled:k||!h.trim(),className:"rounded border border-gray-500 shadow-sm py-2 px-4 font-semibold text-white bg-gray-800 disabled:opacity-50",children:"Comment"})})]}),m?m.map((function(t){return(0,r.jsx)(q,{dotslug:e.dotslug,theme:e.theme,comment:t,loggedInUser:x,refetchComments:function(){return y()}},t._id)})):(0,r.jsx)(o.Z,{mode:e.theme})]})})})}}}]);
//# sourceMappingURL=6106-f9b3747c7a064f66aa41.js.map